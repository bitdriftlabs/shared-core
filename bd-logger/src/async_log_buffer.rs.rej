@@ -516,11 +516,12 @@
   async fn process_all_logs(
     &mut self,
     log: LogLine,
     block: bool,
+    state_store: &bd_state::Store,
   ) -> anyhow::Result<()> {
     let mut logs = VecDeque::new();
     logs.push_back(log);
     while let Some(log) = logs.pop_front() {
-      let log_replay_result = self.process_log(log, block).await?;
+      let log_replay_result = self.process_log(log, block, state_store).await?;
       logs.extend(log_replay_result.logs_to_inject.into_iter().map(|log| {
         LogLine {
